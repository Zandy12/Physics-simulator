<!-- 
This program served as a learning exercise for me in both Computer Science and Mathematics. Originally, it started out as a project to help me better understand C++ and to create algorithms that can simulate a bouncing ball. The project eventually expanded into now I would like to call a "Physics simulator" that can simulate basic physics implemented on balls that can be fully interacted with via user mouse input. While the algorithms were written in Javascript, the display was done using HTML/CSS graphics. Because of this, I had come across some witnessed limitations. Fortunately, I was able to achieve fair results with the project. This was done deliberately by choice and I enjoyed the challenge of trying to use CSS as a graphics engine instead of a WebGL alternative. The project attempts to simulate 4 different types of ball movement: basic movement, bouncing, orbiting, and being shot out of a cannon. Provided in the code are comments for which certain blocks of code do. There are some bugs in the program (i.e increased sizes of bouncing ball overflow on borders), however none should cause the entire program to break. Therefore it should be pretty stable. Enjoy! :D

/*****************************************************************************

MIT License

Copyright (c) 2019 Zane Chandy

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*****************************************************************************/

Portfolio:
GitHub: https://github.com/Zandy12
Stack Overflow: https://stackoverflow.com/users/11323258/zane-c

Resume:
LinkedIn: https://www.linkedin.com/in/zane-chandy-03ba56160/

Conact:
Website: https://www.zaneswackyblog.com
Email:  zanechandy@gmail.com
Youtube: https://www.youtube.com/ channel/UC7FQiD7YCx1xTsF3arAYohw/
-->

<!doctype html>
<html>
    <head>
        <title>Zane's Physics Simulator</title>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <style type="text/css">
        body {
            /* background-image: url("gridBox.png"); */
            background-repeat: no-repeat;
            background-position: 8 8;
        }
        .Box {
            width: 751px; 
            height: 500px; 
            border: 1px solid black;
        } 
        .Ball {
            background-color: black;
            width: 16px; 
            height: 16px; 
            margin-left: 358px;
            margin-top: 232px;
            border-radius: 50%;
        }
        .pauseMenu {
            background-color: black;
        }
        .classToSplit {
            clear: both;
            display: block;
        }
        .topDisplay {
            float:  left;
        }
        /* select#options {
            margin-left: 150px;
            margin-top: 200px;
        } */
        .rightDisplay {
            padding-left: 150px;
            padding-top: 200px;
            margin-right: 500px;
            margin-left: 725px;
        }
        .sliderDisplay {
            margin-top: 10px;
        }
    </style>
    </head>
    <body>
        <div class="classToSplit">
            <div class="topDisplay">
                <div class="Box">
                    <div class="Ball">
                    </div>
                </div>
                <p id="frames">Frames: </p>
                <p id="seconds">Seconds:</p>
                <p id="frameRate">Framerate: </p>
                <p id="coordinates">Coordinates: </p>
                <p id="screenCoords">Mouse coordinates: (0, 0)</p>
                <p id="ballSpeed">Ballspeed: </p>
                <p id="directions">Directions: Select any of the 4 choices to begin.</p>
            </div>
            <div class="rightDisplay">
                <div>
                    <select id="options" size="4">
                        <option value="basic" selected>Basic</option>
                        <option value="implementPhysics" >Implement Physics</option>
                        <option value="solarSystem" >Solar System</option>
                        <option value="ballSpitter" >Ball Spitter</option>
                    </select>
                </div>
                <div class="sliderDisplay">
                    <label id="speed">Frame Rate: </label>
                    <input type="range" min="15" max="300" value="150" class="slider" id="myRange">
                </div>
            </div>
        </div>
        <script>

            /******************
                 Variables     
            *******************/

            const topDisplay = document.querySelector("div.topDisplay");
            const rightDisplay = document.querySelector("div.rightDisplay");
            const box = document.querySelector("div.Box");
            const ball = document.querySelector("div.Ball");
            const frames = document.getElementById("frames");
            const frameRate = document.getElementById("frameRate");
            const coordinates = document.getElementById("coordinates");
            const staticBallSpeed = document.getElementById("ballSpeed");
            const seconds = document.getElementById("seconds");
            const options = document.getElementById("options");
            const ballSpeed = document.createElement('p');
            const cannonBox = document.createElement('div');
            const cannonBarrel = document.createElement('div');
            const myRange = document.getElementById('myRange');
            const speed = document.getElementById('speed');
            const ballSize = document.createElement('div');
            const ballSizeLabel = document.createElement('label');
            const ballSizeText = document.createTextNode('Ball Size (pixels): ');
            const ballSizeInput = document.createElement('input');
            const directions = document.getElementById('directions');

            // booleans
            let gamePaused = false;
            let velExists = false;
            let staticExists = false;
            let ballSpeedExists = false;
            let planetsExist = false;
            let cannonBoxExists = false;
            let ballExists = false;
            let sizeSlider = false;
            let directionsExist = true;

            // uninitialized globals
            let ballX;
            let ballY;
            let ballSpeedX;
            let ballSpeedY;
            let vel;
            let planetOneCoords;
            let planetTwoCoords;
            let planetThreeCoords;
            let truexpos;
            let trueypos;

            // initialized globals 
            let framesDisplayed = 0;
            let coordinatesDisplayed = 0;
            let ballSpeedDisplayed = 0;
            let secondsCounted = 0;
            let count = null;
            let firstInterval = null;
            let secondInterval = null;

            /*******************
                  Functions     
            ********************/

            // find mouse coordinates 
            function findScreenCoords(mouseEvent) {
                let xpos;
                let ypos;
                let mouseCoords = {
                    xpos: null,
                    ypos: null
                }
                if (mouseEvent) {
                    //FireFox
                    mouseCoords.xpos = mouseEvent.screenX;
                    mouseCoords.ypos = mouseEvent.screenY;
                } else {
                    //IE
                    mouseCoords.xpos = window.event.screenX;
                    mouseCoords.ypos = window.event.screenY;
                }
                truexpos = mouseCoords.xpos-16;
                trueypos = mouseCoords.ypos-86;
                document.getElementById("screenCoords").innerHTML = "Mouse coordinates: (" + truexpos + ", " + trueypos + ")";
            }

            // clears DOM of previously used elements and resets original elements and values 
            function clearClearClear() {
                // reset ball
                if (!ballExists) {
                    window.ball = document.createElement('div');
                    ball.className = 'Ball';
                    ball.style.backgroundColor = 'black';
                    ball.style.width = '16px'; 
                    ball.style.height = '16px'; 
                    ball.style.marginLeft = '358px';
                    ball.style.marginTop = '232px';
                    ball.style.borderRadius = '50%';
                    box.appendChild(ball);
                    ballExists = true;
                }        
                // clear previous intervals     
                clearInterval(firstInterval);
                clearInterval(secondInterval);
                clearInterval(count);
                // reset boolean values and respective elements
                if (!staticExists) {
                    staticBallSpeed.parentElement.removeChild(staticBallSpeed);
                    staticExists = true;
                }
                if (ballSpeedExists) {
                    ballSpeed.parentElement.removeChild(ballSpeed);
                    ballSpeedExists = false; 
                }
                if (velExists) {
                    vel.parentElement.removeChild(vel);
                    velExists = false; 
                }
                if (sizeSlider) {
                    ballSize.parentElement.removeChild(ballSize);
                    sizeSlider = false;
                }
                // reposition ball 
                if (ballExists) {
                    ball.style.width = 16 + "px";
                    ball.style.height = 16 + "px";
                    ball.style.marginLeft = 358 + "px";
                    ball.style.marginTop = 232 + "px"; 
                }
                // remove planets 
                if (planetsExist) {
                    planetOne.parentElement.removeChild(planetOne);
                    planetOneCoords.parentElement.removeChild(planetOneCoords);
                    planetTwo.parentElement.removeChild(planetTwo);
                    planetTwoCoords.parentElement.removeChild(planetTwoCoords);
                    planetThree.parentElement.removeChild(planetThree);
                    planetThreeCoords.parentElement.removeChild(planetThreeCoords);
                    coordinates.style.display = 'block';
                    ballSpeed.style.display = 'block';
                    planetsExist = false;
                }
                // remove cannon
                if (cannonBoxExists) {
                    cannonBox.parentElement.removeChild(cannonBox);
                    cannonBarrel.parentElement.removeChild(cannonBarrel);
                    cannonBoxExists = false;
                }
            }

            // create element for velocity output diplay
            function createVel() {
                vel = document.createElement("p");
                let velText = document.createTextNode("Velocity: ");
                vel.appendChild(velText);   
                topDisplay.appendChild(vel);
                velExists = true;            
            }

            // sets planet attributes
            class Planet {
                constructor(color, marginLeft, marginTop) {
                    this.backgroundColor = color,
                    this.width = '16px',
                    this.height = '16px',
                    this.marginLeft = marginLeft,
                    this.marginTop = marginTop,
                    this.borderRadius = '50%'
                }
            }

            // create planets when solar system is selected
            function createPlanets() {
                let planetOne = document.createElement('div');
                planetOne.id = 'planetOne';
                box.appendChild(planetOne);
                let planetOneProps = new Planet('red', '358px', '36px');
                planetOne.style.backgroundColor = planetOneProps.backgroundColor;
                planetOne.style.width = planetOneProps.width;
                planetOne.style.height = planetOneProps.height;
                planetOne.style.marginLeft = planetOneProps.marginLeft;
                planetOne.style.marginTop = planetOneProps.marginTop;
                planetOne.style.borderRadius = planetOneProps.borderRadius;
                planetOneCoords = document.createElement("p");
                let planetOneCoordsText = document.createTextNode("Planet One Coordinates: ");
                planetOneCoords.appendChild(planetOneCoordsText);   
                topDisplay.appendChild(planetOneCoords);
                planetTwo = document.createElement('div');
                planetTwo.id = 'planetTwo';
                box.appendChild(planetTwo);
                let planetTwoProps = new Planet('blue', '358px', '36px');
                planetTwo.style.backgroundColor = planetTwoProps.backgroundColor;
                planetTwo.style.width = planetTwoProps.width;
                planetTwo.style.height = planetTwoProps.height;
                planetTwo.style.marginLeft = planetTwoProps.marginLeft;
                planetTwo.style.marginTop = planetTwoProps.marginTop;
                planetTwo.style.borderRadius = planetTwoProps.borderRadius;
                planetTwoCoords = document.createElement("p");
                let planetTwoCoordsText = document.createTextNode("Planet Two Coordinates: ");
                planetTwoCoords.appendChild(planetTwoCoordsText);   
                topDisplay.appendChild(planetTwoCoords);
                let planetThree = document.createElement('div');
                planetThree.id = 'planetThree';
                box.appendChild(planetThree);
                let planetThreeProps = new Planet('green', '358px', '36px');
                planetThree.style.backgroundColor = planetThreeProps.backgroundColor;
                planetThree.style.width = planetThreeProps.width;
                planetThree.style.height = planetThreeProps.height;
                planetThree.style.marginLeft = planetThreeProps.marginLeft;
                planetThree.style.marginTop = planetThreeProps.marginTop;
                planetThree.style.borderRadius = planetThreeProps.borderRadius;
                planetThreeCoords = document.createElement("p");
                let planetThreeCoordsText = document.createTextNode("Planet Three Coordinates: ");
                planetThreeCoords.appendChild(planetThreeCoordsText);   
                topDisplay.appendChild(planetThreeCoords);
                coordinates.style.display = 'none';
                ballSpeed.style.display = 'none';
            }

            /********************
                   Program      
            *********************/

            // set frame rate slider to default value
            myRange.value = 150;
            window.frameRateDisplayed = myRange.value;
            speed.innerHTML = "Frame Rate: " + (window.frameRateDisplayed);

            // find mouse coordinates in beginning of program
            box.onmousemove = findScreenCoords;

            options.addEventListener('click', (e) => {
                    // Basic
                    if ("clicked" && options.value === "basic") { 
                        // clear the DOM
                        clearClearClear();
                        if (ballSpeedExists === false) {
                            topDisplay.appendChild(ballSpeed);
                            ballSpeedExists = true;
                        }
                        // add directions 
                        if (directionsExist) {
                            let globalDirections = directions;
                            globalDirections.parentElement.removeChild(globalDirections);
                            directionsExist = false;
                        } else if (!directionsExist) {
                            let directions = window.directions;
                            directions.parentElement.removeChild(directions);
                        }
                        window.directions = document.createElement('p');
                        const directionsText = document.createTextNode('Directions: N/A');
                        window.directions.appendChild(directionsText);
                        topDisplay.appendChild(window.directions);
                        // initialize global variables
                        let ballCoords = {
                            ballX: 3,
                            ballY: 3
                        }
                        let ballSpeeds = {
                            ballSpeedX: 1,
                            ballSpeedY: 2
                        }
                        framesDisplayed = 0;
                        secondsCounted = 0;
                        ballSpeed.innerHTML = "Ballspeed: (" + 0 + ", " + 0 + ")";
                        // create interval for loop
                        count = setInterval( function() { secondsCounted++; }, 1000);
                        // code for pause functionality 
                        firstInterval = setInterval( function() {
                            document.addEventListener("keypress", function(event) {
                                    if (event.keyCode === 112 && gamePaused === false) {
                                        gamePaused = true;
                                    } 
                                    else if (event.keyCode === 112 && gamePaused === true) {
                                        gamePaused = false;
                                    }
                            });
                            // loop starts here 
                            if (!gamePaused) {
                                window.frameRateDisplayed = myRange.value;
                                speed.innerHTML = "Frame Rate: " + (window.frameRateDisplayed);
                                ball.style.marginLeft = ballCoords.ballX + "px";
                                ball.style.marginTop = ballCoords.ballY + "px";
                                if (ballCoords.ballY > 484) {
                                    ballSpeeds.ballSpeedY *= -1;
                                }
                                if (ballCoords.ballY < 3) {
                                    ballSpeeds.ballSpeedY *= -1;
                                }
                                if (ballCoords.ballX > 735) {
                                    ballSpeeds.ballSpeedX *= -1;
                                }
                                if (ballCoords.ballX < 3) {
                                    ballSpeeds.ballSpeedX *= -1;
                                }
                                // change html attributes for output display 
                                frames.innerHTML = "Frames: " + framesDisplayed;
                                frameRate.innerHTML = "Framerate: " + Math.round(framesDisplayed/secondsCounted);
                                coordinates.innerHTML = "Coordinates: (" + Math.round(ballCoords.ballX) + ", " + Math.round(ballCoords.ballY) + ")";
                                ballSpeed.innerHTML = "Ballspeed: (" + Math.round(ballSpeeds.ballSpeedX) + ", " + Math.round(ballSpeeds.ballSpeedY) + ")";
                                seconds.innerHTML = "Seconds: " + secondsCounted;
                                // function for repositioning ball via mouse click
                                box.onmousemove = findScreenCoords;
                                /* box.addEventListener('mousedown', (e) => {
                                    mouseIsDown = true;
                                    setInterval(function() {
                                        if(mouseIsDown) {
                                            ballCoords.ballX = truexpos;
                                            ballCoords.ballY = trueypos;
                                        }
                                        if (ballSpeeds.ballSpeedY === -2) {
                                            ballSpeeds.ballSpeedY = 2;
                                        }
                                    }, 1000/window.frameRateDisplayed);
                                });
                                window.addEventListener('mouseup', function() {
                                    mouseIsDown = false;
                                }); */
                                ballCoords.ballX += ballSpeeds.ballSpeedX;
                                ballCoords.ballY += ballSpeeds.ballSpeedY;
                                framesDisplayed++;
                            }
                        }, 1000/window.frameRateDisplayed);
                    }
                    // Implement Physics
                    if ("clicked" && options.value === "implementPhysics") { 
                        // clear the DOM
                        clearClearClear();
                        // create velocity element 
                        if (!velExists) {
                            createVel();
                        } 
                        if (!sizeSlider) {
                            // Create elements for size slider for bouncing ball
                            ballSizeLabel.appendChild(ballSizeText);
                            ballSizeInput.type = 'range';
                            ballSizeInput.min = '16';
                            ballSizeInput.max = '60';
                            ballSizeInput.value = '16';
                            ballSize.appendChild(ballSizeLabel);
                            ballSize.appendChild(ballSizeInput);
                            rightDisplay.appendChild(ballSize);
                            sizeSlider = true;
                        }
                        // add directions 
                        if (directionsExist) {
                            let globalDirections = directions;
                            globalDirections.parentElement.removeChild(globalDirections);
                            directionsExist = false;
                        } else if (!directionsExist) {
                            let directions = window.directions;
                            directions.parentElement.removeChild(directions);
                        }
                        window.directions = document.createElement('p');
                        const directionsText = document.createTextNode('Directions: Click and drag the bouncing ball to interact with it.');
                        window.directions.appendChild(directionsText);
                        topDisplay.appendChild(window.directions);
                        // reinitialize global variables
                        framesDisplayed = 0;
                        secondsCounted = 0;
                        let ballCoords = {
                            ballX: 358,
                            ballY: 232
                        }
                        let ballVelocity = {
                            ballSpeedX: 0,
                            ballSpeedY: 0
                        }
                        let mass = 1;
                        // create interval for loop
                        count = setInterval( function() { secondsCounted++; }, 1000);
                        // code for pause functionality
                        secondInterval = setInterval( function() {
                            document.addEventListener("keypress", function(event) {
                                    if (event.keyCode === 112 && gamePaused === false) {
                                        gamePaused = true;
                                    }
                                    else if (event.keyCode === 112 && gamePaused === true) {
                                        gamePaused = false;
                                    }
                            });
                            // loop starts here
                            if (!gamePaused) {
                                window.frameRateDisplayed = myRange.value;
                                window.currentBallSize = ballSizeInput.value;
                                speed.innerHTML = "Frame Rate: " + (window.frameRateDisplayed);
                                ballSizeLabel.innerHTML = "Ball Size (pixels): " + (window.currentBallSize);
                                ball.style.width = window.currentBallSize + "px";
                                ball.style.height = window.currentBallSize + "px";
                                ball.style.marginLeft = ballCoords.ballX + "px";
                                ball.style.marginTop = ballCoords.ballY + "px";

                                /* algorithm for changing velocity increments to accomodate for mass */

                                // condtions for X-axis movement
                                if (ballCoords.ballX > 3 || ballCoords.ballX < 735) {
                                    if (ballVelocity.ballSpeedX/-ballVelocity.ballSpeedX === 1) {
                                        ballCoords.ballX -= ballVelocity.ballSpeedX;
                                    } else {
                                        ballCoords.ballX += ballVelocity.ballSpeedX;
                                    }
                                }
                                if (ballCoords.ballX < 3 && ballVelocity.ballSpeedX < 0) {
                                    ballVelocity.ballSpeedX *= -1;
                                    ballVelocity.ballSpeedX -= mass;
                                }
                                if (ballCoords.ballX < 1 && ballVelocity.ballSpeedX < -6) {
                                    ballVelocity.ballSpeedX *= -1;
                                    ballVelocity.ballSpeedX -= mass;
                                }
                                if (ballCoords.ballX < -29 && ballVelocity.ballSpeedX >= -6) {
                                    ballVelocity.ballSpeedX *= -1;
                                    ballVelocity.ballSpeedX -= mass;
                                }
                                if (ballCoords.ballX > 735 && ballVelocity.ballSpeedX > 0) {
                                    ballVelocity.ballSpeedX *= -1;
                                    ballVelocity.ballSpeedX += mass;
                                }
                                if (ballCoords.ballX > 737 && ballVelocity.ballSpeedX > 6) {
                                    ballVelocity.ballSpeedX *= -1;
                                    ballVelocity.ballSpeedX += mass;
                                }
                                if (ballCoords.ballX > 767 && ballVelocity.ballSpeedX <= 6) {
                                    ballVelocity.ballSpeedX *= -1;
                                    ballVelocity.ballSpeedX += mass;
                                }
                                // conditions for Y-axis movement
                                if (ballCoords.ballY < 486 && ballVelocity.ballSpeedY > -6) {
                                    ballVelocity.ballSpeedY += mass;
                                    ballCoords.ballY += ballVelocity.ballSpeedY;
                                }
                                if (ballCoords.ballY < 516 && ballVelocity.ballSpeedY <= -6) {
                                    ballVelocity.ballSpeedY += mass;
                                    ballCoords.ballY += ballVelocity.ballSpeedY;                                   
                                }
                                if (ballCoords.ballY > 484 && ballVelocity.ballSpeedY > 0) {
                                    ballVelocity.ballSpeedY *= -1;
                                }
                                if (ballCoords.ballY < 3 && ballVelocity.ballSpeedY > 0) {
                                    ballVelocity.ballSpeedY *= -1;                               
                                }
                                if (ballCoords.ballY < -29 && ballVelocity.ballSpeedY >= 6) {
                                    ballVelocity.ballSpeedY *= -1; 
                                    ballVelocity.ballSpeedY += mass;                                
                                }
                                if (ballCoords.ballY < 1 && ballVelocity.ballSpeedY < 6) {
                                    ballVelocity.ballSpeedY *= -1;
                                    ballVelocity.ballSpeedY += mass;
                                } 
                                // change html attributes for output display 
                                frames.innerHTML = "Frames: " + framesDisplayed;
                                frameRate.innerHTML = "Framerate: " + Math.round(framesDisplayed/secondsCounted); 
                                coordinates.innerHTML = "Coordinates: (" + Math.round(ballCoords.ballX) + ", " + Math.round(ballCoords.ballY) + ")";
                                seconds.innerHTML = "Seconds: " + secondsCounted;
                                vel.innerHTML = "Velocity: (" + ballVelocity.ballSpeedX + ", " + ballVelocity.ballSpeedY + ")";
                                // function for repositioning ball and changing its velocity via clicking and dragging the mouse
                                box.onmousemove = findScreenCoords;
                                box.addEventListener('mousedown', (e) => {
                                    let coordArrayX = [];
                                    let coordArrayY = [];
                                    mouseIsDown = true;
                                    setInterval(function() {
                                        if(mouseIsDown) {
                                            ballCoords.ballX = truexpos;
                                            ballCoords.ballY = trueypos;
                                            ballVelocity.ballSpeedY = 0;
                                            coordArrayX.push(truexpos);
                                            coordArrayY.push(trueypos);
                                            if (coordArrayX.length === 10 || coordArrayY.length === 5) {
                                                let xOne = coordArrayX[0];
                                                let xTwo = coordArrayX[coordArrayX.length-1];
                                                ballVelocity.ballSpeedX = Math.round((xTwo - xOne)/16);
                                                let yOne = coordArrayY[0];
                                                let yTwo = coordArrayY[coordArrayY.length-1];
                                                ballVelocity.ballSpeedY = Math.abs(Math.round((yTwo - yOne)/16));
                                                coordArrayX = [];
                                                coordArrayY = [];
                                            }
                                        }
                                    }, 1000/window.frameRateDisplayed);
                                });
                                window.addEventListener('mouseup', function() {
                                    mouseIsDown = false;
                                });
                                framesDisplayed++;
                            }
                        }, 1000/window.frameRateDisplayed);
                    }
                    // Solar System
                    if ("clicked" && options.value === "solarSystem") { 
                        // clear the DOM
                        clearClearClear();
                        if (!ballSpeedExists) {
                            topDisplay.appendChild(ballSpeed);
                            ballSpeedExists = true;
                        }        
                        // reinitialize globals and call createPlanets function
                        let ballCoords = {
                            ballX: 358,
                            ballY: 232
                        }
                        createPlanets();
                        planetsExist = true;
                        // remove directions
                        if (directionsExist) {
                            let globalDirections = directions;
                            globalDirections.parentElement.removeChild(globalDirections);
                            directionsExist = false;
                        } else if (!directionsExist) {
                            let directions = window.directions;
                            directions.parentElement.removeChild(directions);
                            directionsExist = false;
                        }  
                        window.directions = document.createElement('p');
                        const directionsText = document.createTextNode('Directions: N/A');
                        window.directions.appendChild(directionsText);
                        topDisplay.appendChild(window.directions);   
                        let ballSpeeds = {
                            ballSpeedX: 0,
                            ballSpeedY: 0
                        }      
                        let planetOneCoordss = {
                            planetOneX: null,
                            planetOneY: null
                        }       
                        let planetTwoCoordss = {
                            planetTwoX: null,
                            planetTwoY: null
                        }       
                        let planetThreeCoordss = {
                            planetThreeX: null,
                            planetThreeY: null
                        } 
                        let theta = Math.PI/2;
                        let beta = 2*Math.PI/3;
                        let alpha = 0.01745329252;
                        // function for planetOne orbit parameters
                        function planetOneOrbitParam(radius) {
                            if (theta < 0.01745329252) {
                                theta = 2*Math.PI;
                            }
                            theta -= 0.01745329252;
                            planetOneCoordss.planetOneX = radius*Math.cos(theta)+358;
                            planetOneCoordss.planetOneY = radius*Math.sin(theta)-17;
                            planetOne.style.marginLeft = planetOneCoordss.planetOneX + "px";
                            planetOne.style.marginTop = planetOneCoordss.planetOneY + "px";
                        } 
                        // function for planetTwo orbit parameters
                        function planetTwoOrbitParam(radius) {
                            if (beta < 0.01745329252) {
                                beta = 2*Math.PI;
                            }
                            beta -= 0.01745329252;
                            planetTwoCoordss.planetTwoX = radius*Math.cos(beta)+358;
                            planetTwoCoordss.planetTwoY = radius*Math.sin(beta)-17;          
                            planetTwo.style.marginLeft = planetTwoCoordss.planetTwoX + "px";
                            planetTwo.style.marginTop = planetTwoCoordss.planetTwoY + "px";
                        }
                        // function for planetThree orbit parameters
                        function planetThreeOrbitParam(radius) {
                            if (alpha < 0.01745329252) {
                                alpha = 2*Math.PI;
                            }
                            alpha -= 0.01745329252;
                            planetThreeCoordss.planetThreeX = radius*Math.cos(alpha)+358;
                            planetThreeCoordss.planetThreeY = radius*Math.sin(alpha)-17;          
                            planetThree.style.marginLeft = planetThreeCoordss.planetThreeX + "px";
                            planetThree.style.marginTop = planetThreeCoordss.planetThreeY + "px";
                        }
                        framesDisplayed = 0;
                        secondsCounted = 0;
                        ballSpeed.innerHTML = "Ballspeed: (" + 0 + ", " + 0 + ")";
                        // create interval for loop
                        count = setInterval( function() { secondsCounted++; }, 1000);
                        // code for pause functionality 
                        firstInterval = setInterval( function() {
                            document.addEventListener("keypress", function(event) {
                                    if (event.keyCode === 112 && gamePaused === false) {
                                        gamePaused = true;
                                    } 
                                    else if (event.keyCode === 112 && gamePaused === true) {
                                        gamePaused = false;
                                    }
                            });
                            // loop starts here
                            if (!gamePaused) {
                                window.frameRateDisplayed = myRange.value;
                                speed.innerHTML = "Frame Rate: " + (window.frameRateDisplayed);
                                planetOneOrbitParam(52);  // planetOne, planetOneX, planetOneY, 52, 410, 306, -16
                                planetTwoOrbitParam(104); // radius   
                                planetThreeOrbitParam(130);               
                                // change html attributes for output display 
                                frames.innerHTML = "Frames: " + framesDisplayed;
                                frameRate.innerHTML = "Framerate: " + Math.round(framesDisplayed/secondsCounted);
                                planetOneCoords.innerHTML = "Planet One Coordinates: (" + Math.round(planetOneCoordss.planetOneX) + ", " + Math.round(planetOneCoordss.planetOneY) + ")";
                                planetTwoCoords.innerHTML = "Planet Two Coordinates: (" + Math.round(planetTwoCoordss.planetTwoX) + ", " + Math.round(planetTwoCoordss.planetTwoY) + ")";
                                planetThreeCoords.innerHTML = "Planet Three Coordinates: (" + Math.round(planetThreeCoordss.planetThreeX) + ", " + Math.round(planetThreeCoordss.planetThreeY) + ")";
                                seconds.innerHTML = "Seconds: " + secondsCounted;
                                box.onmousemove = findScreenCoords;
                                framesDisplayed++;
                            }
                        }, 1000/window.frameRateDisplayed);
                    }
                    // Ball Spitter
                    if ("clicked" && options.value === "ballSpitter") {
                        // clear the DOM
                        clearClearClear();
                        if (ballExists) {
                            ball.parentElement.removeChild(ball);
                            ballExists = false;
                        } 
                        if (!velExists) {
                            createVel();
                            velExists = true;
                        } 
                        if (!cannonBoxExists) {
                            topDisplay.appendChild(cannonBox);
                            cannonBox.style.width = '23px';
                            cannonBox.style.height = '23px';
                            cannonBox.style.marginTop = '-242px';
                            cannonBox.style.marginLeft = '2px';
                            cannonBox.style.backgroundColor = 'black';
                            topDisplay.appendChild(cannonBarrel);
                            cannonBarrel.style.backgroundColor = 'black';
                            cannonBarrel.style.marginTop = '-35px';
                            cannonBarrel.style.width = '46px';
                            cannonBarrel.style.height = '17px';
                            cannonBarrel.style.transform = 'rotate(-45deg)';
                            cannonBoxExists = true;
                        }
                        // add directions 
                        if (directionsExist) {
                            let globalDirections = directions;
                            globalDirections.parentElement.removeChild(globalDirections);
                            directionsExist = false;
                        } else if (!directionsExist) {
                            let directions = window.directions;
                            directions.parentElement.removeChild(directions);
                        }
                        window.directions = document.createElement('p');
                        const directionsText = document.createTextNode('Directions: Change direction of cannon (\'S\' for up, \'W\' for down), and press \'Space\' to shoot.');
                        window.directions.appendChild(directionsText);
                        topDisplay.appendChild(window.directions);
                        // reinitialize globals
                        framesDisplayed = 0;
                        secondsCounted = 0;
                        let mass = 1;
                        let theta  = -45;
                        let secondsExisted;
                        let ballSpeeds = {
                            ballSpeedX: null,
                            ballSpeedY: null
                        }
                        let ballCoords = {
                            ballX: null,
                            ballY: null
                        }
                        // set local to global 
                        window.ball;
                        // create interval for loop
                        count = setInterval( function() { secondsCounted++; }, 1000);
                        // code for pause functionality
                        secondInterval = setInterval( function() {
                            document.addEventListener("keypress", function(event) {
                                    if (event.keyCode === 112 && gamePaused === false) {
                                        gamePaused = true;
                                    }
                                    else if (event.keyCode === 112 && gamePaused === true) {
                                        gamePaused = false;
                                    }
                            });
                            // loop starts here
                            if (!gamePaused) {
                                window.frameRateDisplayed = myRange.value;
                                speed.innerHTML = "Frame Rate: " + (window.frameRateDisplayed);
                                // allow user to change direction of cannon barrel and to fire via keyboard controls
                                document.addEventListener('keypress', (e) => {
                                    // when 'W' key is pressed
                                    if (e.keyCode === 119) {
                                        theta += 0.01745329252;
                                        if (theta <= 14.603 && theta >= -105.301) {
                                            cannonBarrel.style.transform = 'rotate(' + theta + 'deg)';
                                        }
                                    }
                                    // when 'S' key is pressed
                                    if (e.keyCode === 115) {
                                        theta -= 0.01745329252;
                                        if (theta <= 14.603 && theta >= -105.301) {
                                            cannonBarrel.style.transform = 'rotate(' + theta + 'deg)';
                                        }
                                    }
                                    // when 'SpaceBar' is pressed
                                    if (e.keyCode === 32) {
                                        if (!ballExists) {
                                            window.ball = document.createElement('div');
                                            box.appendChild(window.ball);
                                            window.ball.style.backgroundColor = 'black';
                                            window.ball.style.width = '16px'; 
                                            window.ball.style.height = '16px'; 
                                            window.ball.style.borderRadius = '50%';
                                            secondsExisted = secondsCounted+5;
                                            ballExists = true;
                                        }
                                        // several if conditions for ball accuracy
                                        if (theta >= -105.301 && theta <= -94.401) {
                                            ballCoords.ballX = 12;
                                            ballCoords.ballY = 447;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = -10;
                                            ballSpeeds.ballSpeedY = -30;
                                        }
                                        if (theta >= -94.401 && theta <= -83.501) {
                                            ballCoords.ballX = 16;
                                            ballCoords.ballY = 447;  
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px'; 
                                            ballSpeeds.ballSpeedX = 0;
                                            ballSpeeds.ballSpeedY = -30;                                         
                                        }
                                        if (theta >= -83.501 && theta <= -72.601) {
                                            ballCoords.ballX = 18;
                                            ballCoords.ballY = 447;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 10;
                                            ballSpeeds.ballSpeedY = -30;
                                        }
                                        if (theta >= -72.601 && theta <= -61.701) {
                                            ballCoords.ballX = 23;
                                            ballCoords.ballY = 448;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 15;
                                            ballSpeeds.ballSpeedY = -30;
                                        }
                                        if (theta >= -61.701 && theta <= -50.801) {
                                            ballCoords.ballX = 26;
                                            ballCoords.ballY = 450;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 20;
                                            ballSpeeds.ballSpeedY = -25;
                                        }
                                        if (theta >= -50.801 && theta <= -39.901) {
                                            ballCoords.ballX = 31;
                                            ballCoords.ballY = 452;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 25;
                                            ballSpeeds.ballSpeedY = -25;
                                        }
                                        if (theta >= -39.901 && theta <= -29.001) {
                                            ballCoords.ballX = 33;
                                            ballCoords.ballY = 455;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 25;
                                            ballSpeeds.ballSpeedY = -20;
                                        }
                                        if (theta >= -29.001 && theta <= -18.101) {
                                            ballCoords.ballX = 35;
                                            ballCoords.ballY = 458;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 30;
                                            ballSpeeds.ballSpeedY = -15;
                                        }
                                        if (theta >= -18.101 && theta <= -7.201) {
                                            ballCoords.ballX = 37;
                                            ballCoords.ballY = 462;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 35;
                                            ballSpeeds.ballSpeedY = -10;
                                        }
                                        if (theta >= -7.201 && theta <= 3.699) {
                                            ballCoords.ballX = 39;
                                            ballCoords.ballY = 469;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 30;
                                            ballSpeeds.ballSpeedY = -5;
                                        }
                                        if (theta >= 3.699 && theta <= 14.599) {
                                            ballCoords.ballX = 38;
                                            ballCoords.ballY = 472;
                                            window.ball.style.marginLeft = ballCoords.ballX + 'px';
                                            window.ball.style.marginTop = ballCoords.ballY + 'px';
                                            ballSpeeds.ballSpeedX = 30;
                                            ballSpeeds.ballSpeedY = 5;
                                        }
                                    }
                                });
                                // update ball position 
                                if (ballExists) {
                                    window.ball.style.marginLeft = ballCoords.ballX + "px";
                                    window.ball.style.marginTop = ballCoords.ballY + "px";
                                }

                                /* algorithm for changing velocity increments to accomodate for mass */

                                // change velocity increments to accomodate for mass
                                if (ballCoords.ballX > 3 || ballCoords.ballX < 735) {
                                    if (ballSpeeds.ballSpeedX/-ballSpeeds.ballSpeedX === 1) {
                                        ballCoords.ballX -= ballSpeeds.ballSpeedX;
                                    } else {
                                        ballCoords.ballX += ballSpeeds.ballSpeedX;
                                    }
                                }
                                if (ballCoords.ballX < 3 && ballSpeeds.ballSpeedX < 0) {
                                    ballSpeeds.ballSpeedX *= -1;
                                    ballSpeeds.ballSpeedX -= mass;
                                }
                                if (ballCoords.ballX < 1 && ballSpeeds.ballSpeedX < -6) {
                                    ballSpeeds.ballSpeedX *= -1;
                                    ballSpeeds.ballSpeedX -= mass;
                                }
                                if (ballCoords.ballX < -29 && ballSpeeds.ballSpeedX >= -6) {
                                    ballSpeeds.ballSpeedX *= -1;
                                    ballSpeeds.ballSpeedX -= mass;
                                }
                                if (ballCoords.ballX > 735 && ballSpeeds.ballSpeedX > 0) {
                                    ballSpeeds.ballSpeedX *= -1;
                                    ballSpeeds.ballSpeedX += mass;
                                }
                                if (ballCoords.ballX > 737 && ballSpeeds.ballSpeedX > 6) {
                                    ballSpeeds.ballSpeedX *= -1;
                                    ballSpeeds.ballSpeedX += mass;
                                }
                                if (ballCoords.ballX > 767 && ballSpeeds.ballSpeedX <= 6) {
                                    ballSpeeds.ballSpeedX *= -1;
                                    ballSpeeds.ballSpeedX += mass;
                                }
                                // conditions for Y-axis movement
                                if (ballCoords.ballY < 486 && ballSpeeds.ballSpeedY > -6) {
                                    ballSpeeds.ballSpeedY += mass;
                                    ballCoords.ballY += ballSpeeds.ballSpeedY;
                                }
                                if (ballCoords.ballY < 516 && ballSpeeds.ballSpeedY <= -6) {
                                    ballSpeeds.ballSpeedY += mass;
                                    ballCoords.ballY += ballSpeeds.ballSpeedY;                                   
                                }
                                if (ballCoords.ballY > 484 && ballSpeeds.ballSpeedY > 0) {
                                    ballSpeeds.ballSpeedY *= -1;
                                }
                                if (ballCoords.ballY < 3 && ballSpeeds.ballSpeedY > 0) {
                                    ballSpeeds.ballSpeedY *= -1;                               
                                }
                                if (ballCoords.ballY < -29 && ballSpeeds.ballSpeedY >= 6) {
                                    ballSpeeds.ballSpeedY *= -1; 
                                    ballSpeeds.ballSpeedY += mass;                                
                                }
                                if (ballCoords.ballY < 1 && ballSpeeds.ballSpeedY < 6) {
                                    ballSpeeds.ballSpeedY *= -1;
                                    ballSpeeds.ballSpeedY += mass;
                                }
                                // check if ball existed more than 5 seconds
                                if (secondsExisted < secondsCounted) {
                                    if (ballExists) {
                                        window.ball.parentElement.removeChild(window.ball);
                                        ballExists = false;
                                        // reinitialize ball attributes
                                        ballSpeeds.ballSpeedX = undefined;
                                        ballSpeeds.ballSpeedY = undefined;
                                        ballCoords.ballY = NaN;
                                        ballCoords.ballX = NaN;
                                    }
                                } 
                                // change html attributes for output display
                                frames.innerHTML = "Frames: " + framesDisplayed;
                                frameRate.innerHTML = "Framerate: " + Math.round(framesDisplayed/secondsCounted); 
                                coordinates.innerHTML = "Coordinates: (" + Math.round(ballCoords.ballX) + ", " + Math.round(ballCoords.ballY) + ")";
                                seconds.innerHTML = "Seconds: " + secondsCounted;
                                vel.innerHTML = "Velocity: (" + ballSpeeds.ballSpeedX + ", " + ballSpeeds.ballSpeedY + ")";
                                box.onmousemove = findScreenCoords;
                                framesDisplayed++;
                            }
                        }, 1000/window.frameRateDisplayed);
                    } 
                });
                
        </script>
    </body>
</html>